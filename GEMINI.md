# GEMINI.md

## プロジェクトの目的

- 距離センサー VL53L0X の Python ドライバー
- **Raspberry Pi Zero 2W** のような低スペックの環境でも、ちゃんと測定できること。
- **pigpio**を使うこと。
- ライブラリとして利用できるだけでなく、CLIで、動作確認やデモが行えるようにする。

## プロジェクト全体のルール

- **`git commit`は、ユーザーが行う**: コミットが必要だと思われるタイミングで、ユーザーにコミットを促す。このとき、一行で簡潔なコミットメッセージの案を提示する。コミットメッセージは英語。

- **プロジェクトの設定・管理**は、 `pyproject.toml`で行う。
- **コマンドの実行**は、`uv run ...`を使う。

- **リンティング**は、`uv run ruff ....`と、`uv run mypy ....`を行う。
- **テストプログラム**は、 `tests` ディレクトリ以下に番号をつけて作成する。
- **テストの実行**は、 `uv run python -m pytest -v ...`を使う

- **確実なファイル更新方法**: 新しくファイルを作成して、差し替えるのが確実


## コーディング・ルール

- ソースコード内のコメントは、基本的に日本語
- ソースコードの一行の長さは、78文字以内
- デバッグログは、`my_logger.py` の `get_logger()`を使うこと


## タスクの計画と実行について: `ToDo.md` `Tasks.md`

- 作業を行う前には、**必ず** `Task.md`を以下のルールで作成してから実行すること
 

### `Task.md` が存在する場合

- `Tasks.md` に従って、チェックがないタスクから、順番に実行する。
- ソースコードを変更したら、リンティングを行うとともに、テストプログラムを作成・編集して動作を確認する。
- タスク項目が一つ完了するたびに、`Tasks.md` の該当項目にチェックを入れる。
- 追加タスクが必要になったら、`Tasks.md`の内容も更新する。
- タスクが一つ完了したら、`ToDo.md` を確認して、完了した内容にはチェックを入れる。
- すべてのタスクが完了したら、 `Tasks.md` を `Tasks-done-yyyymmdd-HHMM.md` の形式にリネームして、`archives`ディレクトリに移動する。
- `git commit`は、ユーザーが行う。コミットが必要だと思われるタイミングで、ユーザーにコミットを促す。このとき、一行で簡潔なコミットメッセージの案を作成して提示する。


### `Task.md` が存在しない場合

- `ToDo.md` の内容を確認して、**優先項目**でチェックされてない項目の先頭に書かれている内容の実行計画を立案し、詳細なタスクに分解する。
    - 基本的に、ToDo項目一つについて、Task.mdを一つずつ作成して、ステップバイステップで作業を進める。
- タスクの進捗を管理するため、 `Tasks.md` にチェックリストを作成する。
- `Tasks.md` を作成したら、実行する前に、ユーザーに確認すること。


## 参考になる情報

- [Pololu社:Arduino用 C++ ソースコード](https://github.com/pololu/vl53l0x-arduino)
- https://github.com/cassou/VL53L0X_rasp
- https://github.com/johnbryanmoore/VL53L0X_rasp_python
